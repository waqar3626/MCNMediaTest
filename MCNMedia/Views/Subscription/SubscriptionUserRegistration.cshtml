@model MCNMedia_Dev.Models.Subscriptions

@{
    ViewData["Title"] = "Subscribe";
    Layout = "~/Views/Shared/_LayoutWebsite.cshtml";

}
<style>
    .invalid-feedback2 {
        display: block;
        width: 100%;
        margin-top: 0.25rem;
        font-size: 80%;
        color: #dc3545;
    }

    .textboxstyle {
        display: block;
        width: 100%;
        height: 2.875rem;
        padding: 0.875rem 1.375rem;
        padding-right: 1.375rem;
        font-size: 0.875rem;
        font-weight: 400;
        line-height: 1;
        color: #495057;
        background-color: #ffffff;
        background-clip: padding-box;
        border: 1px solid #ced4da;
        border-radius: 2px;
        transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        border-color: #dc3545;
        padding-right: calc(1.5em + 0.75rem);
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right calc(0.375em + 0.1875rem) center;
        background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
    }

        .textboxstyle:focus {
            color: #495057;
            background-color: #fff;
            border-color: #dc3545;
            outline: 0;
            box-shadow: 0 0 0 0.2rem rgba(246, 204, 208, 0.25);
        }
</style>
<form asp-controller="Subscription" id="AddUserForm" asp-action="UserRegistration" method="post">
    @{ if (ViewBag.ErrorMsg == 2)
        {
<div class="form-group alert-danger text-center"   style="        border: 1px solid red ">
    <label type="password" class=" text-red text-center"> Email Address Already Exists</label>
</div> } 
        }
    <div class="row m-0 mt-5 mb-5">
        <div class="col-3 d-lg-block d-none"></div>
        <div class="col-lg-6 col-md-6 col-sm-12 text-center">
            <div class="row text-center">
                <div class=" font-36 text-center pt-4 pb-4 bg-white container avantgardece" style="color: #1f4a79">
                    Sign Up now
                </div>
                <input type="hidden" name="subscriptionId" value="@ViewBag.PackageId" />
                <div class="form-group col-sm-12">
                    @*<label asp-for="ContactName">Name</label>*@
                    <span class="text-danger" asp-validation-for="Name"></span>
                    <input class="form-control selectWrapper" asp-for="Name" required placeholder="Name">
                    <div class="invalid-feedback text-left">
                        Please provide a valid User Name
                    </div>
                </div>
                <div class="form-group col-sm-12">
                    @*<label asp-for="ContactSubject">Subject</label>*@
                    <span class="text-danger" asp-validation-for="CountryId"></span>
                    <select id="select2" name="countryId" asp-for="CountryId" required class="custom-select" asp-items="@(new SelectList(@ViewBag.Countries,"Value","Text"))">
                        <option value="-1" disabled selected>--Select Country--</option>
                    </select>
                    <div class="invalid-feedback text-left">
                        Please provide a valid Country
                    </div>
                </div>
                <div class="form-group col-sm-12">
                    @*<label asp-for="ContactEmail">Email</label>*@
                    <span class="text-danger" asp-validation-for="EmailAddress"></span>
                    <input type="email" class="form-control selectWrapper" asp-for="EmailAddress" required placeholder="Email">
                <div class="invalid-feedback text-left">
                    Please provide a valid Email Address
                </div>
                </div>

                <div class="form-group col-sm-12">
                    @*<label class="col-form-label">Message</label>*@
                    <span class="text-danger" asp-validation-for="Password"></span>
                    <input type="password" class="form-control selectWrapper" id="validationCustom04" required asp-for="Password" placeholder="Password">
                    <div class="invalid-feedback" id="PasswordAlertLabel" >
                        <ul>
                            <li class="text-left">Password field required</li>
                            <li class="text-left">password must be atleast 8 character long</li>
                            <li class="text-left">password must contain atleast 1 Upper Case letter</li>
                            <li class="text-left">password must contain atleast 1 Lower Case letter</li>
                            <li class="text-left">password must contain atleast 1 Numeric Digit</li>
                            <li class="text-left">password must not contain User First Name or Last Name</li>
                            <li class="text-left">password must not contain Sequence of Character of digits number </li>
                            <li class="text-left">password must not contain Your First Name & Last Name </li>
                        </ul>
                    </div>
                </div>
                <div class="form-group col-sm-12 float-right rounded-sm ">

                    <button id="BtnAddUser" value="" class="btn bg-blue my-2 my-sm-0 pl-xl-5 pl-4 pr-xl-5 pr-4 text-white font-14">Sign Up</button>
                </div>
                <div class="form-group col-sm-12 float-right rounded-sm ">
                    <a type="submit" asp-action="SubscriptionUserLogin" asp-controller="Subscription" style="color: #1f4a79">Already have an account. Sign in ?</a>
                </div>
            </div>
        </div>
        <div class="col-1 d-lg-block d-none"></div>
    </div>

</form>

<script>

    $('#validationCustom04').keyup(function () {
      
        var Check = CheckValidation();
        if (check) {

            $('#PasswordAlertLabel').attr('class', 'invalid-feedback');
            $('#validationCustom04').attr('class', 'form-control');
        }
    });

    function CheckValidation() {
        var check = true;
       

        var Passwordcheck = document.getElementById('validationCustom04').value;

        if ($("#validationCustom04").val().length < 8) {


            check = false;
        }
        else if (!/\d/.test($("#validationCustom04").val())) {

            check = false;
        }
        else if
            (!/[a-z]/.test($("#validationCustom04").val())) {


            check = false;
        }
        else if (!/[A-Z]/.test($("#validationCustom04").val())) {


            check = false;
        } else if (!/([~,!,@@,#,$,%,^,&,*,-,_,+,=,?,>,<])/.test($("#validationCustom04").val())) {


            check = false;
        }
       

        if (check == false) {

            $('#PasswordAlertLabel').attr('class', 'invalid-feedback2');
            $('#validationCustom04').attr('class', 'textboxstyle');

            return false;
            $('#AddUserPopUp').modal('show');
        }
        else {

            $('#PasswordAlertLabel').attr('class', 'invalid-feedback');
            $('#validationCustom04').attr('class', 'form-control');
            return true;
        }

    }

   

        $("#BtnAddUser").on("click", function (e) {
            
            var form = $("#AddUserForm")[0];
            var isValid = form.checkValidity();
            var passwordCheck = CheckValidation();
           

            if (!isValid) {

                e.preventDefault();
                e.stopPropagation();
            }
            else if (!passwordCheck) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            else {

                return true;
            }
            form.classList.add('was-validated');
            return false; // For testing only to stay on this page
        });

</script>