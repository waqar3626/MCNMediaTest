@using Microsoft.AspNetCore.Http;
@model MCNMedia_Dev.Models.Church
@{
    ViewData["Title"] = "ChurchInfo";
    Layout = "~/Views/Shared/_LayoutClient.cshtml";

}

<script src="~/theme/js/FormValidation.js"></script>
<style>
    .invalidImage {
        width: 100%;
        margin-top: 0.25rem;
        font-size: 80%;
        color: #dc3545;
    }
</style>

<form asp-action="UpdateChurchInfo" method="post" enctype="multipart/form-data" class="needs-validation" novalidate>
    <div class="card">
        <div class="card-header card-header-custom">
            <h3 id="HeaderChurchName">@Model.ChurchName , @Model.Town</h3>
        </div>
        <div class="card-body">
            <input type="hidden" />

            <div class="form-group row ">
                <div class="col-sm-4 pt-4">
                    <div class="form-group row">
                        <div class="col-sm-12" style="height:275px;">
                            <div class="card" style="margin-top:30px"  id="cardImage">
                                <div class="card-body ">

                                    <input asp-for="ImageURl" type="file" name="ImageUrl" class="dropify" id="Churches_ImageURl" />
                                    <span asp-validation-for="ImageURl" class="text-danger"></span>
                                    <input type="hidden" asp-for="ImageURl" name="hdnImageUrl" id="ImageCheckUrl" />



                                </div>
                                <div class="invalid-feedback" id="ImageText1">
                                    Please Select a valid Image Image Supported Only jpeg, jpg, png, gif, bmp
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                        <div class="col-sm-8">
                            <div class=" form-group row">
                                <div class="col-sm-12">
                                    @*id="validationCustom01"*@
                                    <input type="hidden" asp-for="CountyId" value="@Model.CountyId" id="CountyId123" />
                                    <input type="hidden" asp-for="ClientTypeId" value="@Model.ClientTypeId" id="ClientTypeId123" />

                                    <label class="form-label">Name</label>

                                    @Html.TextBoxFor(Model => Model.ChurchName, new { @class = "form-control", required = "required" })
                                    <input type="hidden" asp-for="ChurchId" value="@Model.ChurchId" id="ChurchId123" />
                                    @*<input type="text" class="form-control" asp-for="ChurchName"  />*@
                                    <div class="invalid-feedback">
                                        Please Provide a valid Church Name
                                    </div>
                                </div>
                            </div>
                            <div class=" form-group row">
                                <div class="col-sm-4">
                                    <label class="form-label">Email</label>
                                    <input type="text" class="form-control" value="@Model.EmailAddress" required placeholder="Email" asp-for="EmailAddress" />
                                    <div class="invalid-feedback">
                                        Please Provide a valid Email
                                    </div>
                                </div>

                                <div class="col-sm-4">
                                    <label class="form-label">Phone</label>
                                    <input type="text" class="form-control" placeholder="Phone" asp-for="Phone" required />
                                    <div class="invalid-feedback">
                                        Please Provide a valid Phone
                                    </div>
                                </div>

                                <div class="col-sm-4">
                                    <label class="form-label">Address</label>
                                    <input type="text" class="form-control" placeholder="Address" asp-for="Address" required />
                                    <div class="invalid-feedback">
                                        Please Provide a valid Address
                                    </div>
                                </div>
                            </div>
                            <div class=" form-group row">
                                <div class="col-sm-4">
                                    <label class="form-label">Town</label>
                                    <input type="text" class="form-control" placeholder="Town" asp-for="Town" required />
                                    <div class="invalid-feedback">
                                        Please Provide a valid Town
                                    </div>
                                </div>

                                <div class="col-sm-4">
                                    <label class="form-label">WebSite</label>
                                    <input type="text" class="form-control" placeholder="Address" asp-for="Website" required />
                                    <div class="invalid-feedback">
                                        Please Provide a valid Website
                                    </div>
                                </div>


                                <div class="col-sm-4">
                                    <label class="form-label">Password</label>
                                    <input type="text" id="Password" class="form-control" placeholder="Password" asp-for="Password" />

                                </div>
                            </div>
                            <div class="form-group float-right">

                                <button type="submit" id="ValClientChurchSubmit" value="Update" class="btn btn-success btn-sm " title="Update"><i class="mdi mdi-update"></i> Update</button>
                            </div>
                        </div>
                    </div>

                </div>
    </div>
</form>
<script>
    var ImageData = $('#Churches_ImageURl').val();


    $('#ValClientChurchSubmit').click(function () {






        var fileExtension = ['jpeg', 'jpg', 'png', 'gif', 'bmp'];
        if ($.inArray($('#ImageData').val().split('.').pop().toLowerCase(), fileExtension) == -1) {

            if ($('#ImageCheckUrl').val() == "") {

                $('#cardImage').attr("class", "card border-danger");
                $('#ImageText1').show();
                return false;
            }


        }
        else {
            $('#cardImage').attr("class", "card border-success");
            $('#ImageText1').hide();
        }

    });
    $('#Churches_ImageURl').change(function () {

        var fileExtension = ['jpeg', 'jpg', 'png', 'gif', 'bmp'];
        if ($.inArray($('#Churches_ImageURl').val().split('.').pop().toLowerCase(), fileExtension) == -1) {


            $('#cardImage').attr("class", "card border-danger");

            $('#ImageText1').show();
            return false;


        }

        else {

            $('#cardImage').attr("class", "card border-success");
            $('#ImageText1').hide();

        }

    });
    $(document).ready(function () {

        var filedropper = $('#Churches_ImageURl').dropify();
        filedropper = filedropper.data('dropify');
        filedropper.resetPreview();
        filedropper.clearElement();
        filedropper.settings['defaultFile'] = $('#ImageCheckUrl').val();
        filedropper.destroy();
        filedropper.init();
    });
</script>


